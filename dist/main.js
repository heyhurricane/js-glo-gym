(()=>{"use strict";(()=>{const e=document.querySelector(".club-select");let t=!1;const l=()=>{e.querySelector("ul").style.display=t?"none":"block",t=!t};document.body.addEventListener("click",(e=>{let n=e.target;n=n.closest(".club-select"),n||e.target.classList.contains("club-select__list")||e.target.classList.contains("club-select__option")||!t?n&&(n=e.target,console.log(n.classList),n.classList.contains("club-select__link")?console.log(n.classList):n.classList.contains("club-select__list")||n.classList.contains("club-select__option")||l()):l()}))})(),(()=>{const e=document.getElementById("free_visit_form"),t=document.querySelector(".open-popup"),l=document.querySelectorAll(".callback-btn"),n=document.getElementById("callback_form"),s=document.querySelector(".fixed-gift"),o=document.getElementById("gift"),c=document.getElementById("thanks");t.addEventListener("click",(t=>{t.preventDefault(),e.style.display="block"})),l.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),n.style.display="block"}))}));const r=(e,t)=>{(t.classList.contains("close_icon")||t.classList.contains("close-btn")||(t=t.closest(".overlay")))&&(e.style.display="none")};e.addEventListener("click",(t=>{let l=t.target;r(e,l)})),n.addEventListener("click",(e=>{let t=e.target;r(n,t)})),o&&(o.addEventListener("click",(e=>{let t=e.target;r(o,t)})),s.addEventListener("click",(e=>{e.preventDefault(),o.style.display="block",s.style.display="none"}))),c.addEventListener("click",(e=>{let t=e.target;r(c,t)}))})(),(()=>{const e=document.querySelector(".main-slider").querySelectorAll(".slide");let t,l=0;const n=()=>{var t,n;(t=e)[n=l].classList.remove("slide--active"),t[n].style.display="none",l++,l>=e.length&&(l=0),((e,t,l)=>{e[t].classList.add("slide--active"),e[t].style.display="flex"})(e,l)};((e=3e3)=>{t=setInterval(n,e)})(4e3)})(),(()=>{const e=document.querySelector(".services-slider"),t=e.querySelectorAll(".slide");let l=0,n=0;const s=(e,t,l)=>{e[t].classList.remove(l),e[t].style.display="none"},o=(e,t,l)=>{e[t].classList.add(l),e[t].style.display="block"};e.addEventListener("click",(e=>{e.preventDefault();let c=e.target;if(c.matches(".slider-btn"))if(c.matches(".slider-btn-next")){if(n+1>=t.length)return;s(t,l,"slide--active"),l>n?n++:n=l+5,l++,l>=t.length&&(l=0),l<0&&(l=t.length-1),n<0&&(n=t.length-1),o(t,n,"slide--active")}else if(c.matches(".slider-btn-prev")){if(0===l)return;s(t,n,"slide--active"),n--,l--,l>=t.length&&(l=0),l<0&&(l=t.length-1),n<0&&(n=t.length-1),o(t,l,"slide--active")}}))})(),(()=>{const e=document.querySelector(".gallery-slider"),t=e.querySelectorAll(".slide"),l=document.querySelector(".slider-dots");for(let e=0;e<t.length;e++){const e=document.createElement("li");e.classList.add("dot"),l.append(e)}const n=document.querySelectorAll(".dot");n[0].classList.add("dot-active");let s,o=0;const c=(e,t,l)=>{e[t].classList.remove(l)},r=(e,t,l)=>{e[t].classList.add(l)},a=()=>{c(t,o,"slide--active"),c(n,o,"dot-active"),o++,o>=t.length&&(o=0),r(t,o,"slide--active"),r(n,o,"dot-active")},i=(e=3e3)=>{s=setInterval(a,e)};i(4e3),e.addEventListener("click",(e=>{e.preventDefault();let l=e.target;l.matches(".gallery-slider-btn, .dot")&&(c(t,o,"slide--active"),c(n,o,"dot-active"),l.matches(".gallery-slider-btn-next")?o++:l.matches(".gallery-slider-btn-prev")?o--:l.matches(".dot")&&n.forEach(((e,t)=>{e===l&&(o=t)})),o>=t.length&&(o=0),o<0&&(o=t.length-1),r(t,o,"slide--active"),r(n,o,"dot-active"))})),e.addEventListener("mouseover",(e=>{e.target.matches(".gallery-slider-btn, .dot")&&clearInterval(s)})),e.addEventListener("mouseout",(e=>{e.target.matches(".gallery-slider-btn, .dot")&&i(4e3)}))})(),document.querySelectorAll('[name="name"]').forEach((e=>{e.addEventListener("input",(()=>{e.value=e.value.replace(/[^а-яА-Я\s]/,"")}))})),((e,t="+7 (___) ___-__-__")=>{const l=document.querySelectorAll(e),n=e=>{const l=e.target,n=e.keyCode,s=t,o=s.replace(/\D/g,""),c=l.value.replace(/\D/g,"");let r=0,a=s.replace(/[_\d]/g,(function(e){return r<c.length?c.charAt(r++)||o.charAt(r):e}));r=a.indexOf("_"),-1!==r&&(a=a.slice(0,r));let i=s.substr(0,l.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");i=new RegExp("^"+i+"$"),(!i.test(l.value)||l.value.length<5||n>47&&n<58)&&(l.value=a),"blur"===e.type&&l.value.length<5&&(l.value="")};for(const e of l)e.addEventListener("input",n),e.addEventListener("focus",n),e.addEventListener("blur",n)})('[name="phone"]',"+7 (___) ___-__-__"),(()=>{const e=document.querySelectorAll("form");let t=document.createElement("div");t.style.cssText="font-size: 2rem;",e.forEach((l=>{"footer_form"===l.getAttribute("id")&&l.addEventListener("click",(()=>{e[3].querySelector("#callback_form1-phone").value=l.querySelectorAll("input")[2].value})),l.addEventListener("submit",(e=>{e.preventDefault();const n=l.querySelectorAll("input");"form1"!==l.getAttribute("id")&&"form2"!==l.getAttribute("id")||(t.style.color="#FFF"),t.textContent="";let s=0;if(n.forEach((e=>{let t;t="form1"===l.getAttribute("id")||"card_order"===l.getAttribute("id")||"form2"===l.getAttribute("id")?document.createElement("span"):document.createElement("div");const n=t;n.classList.add("mistake"),"form1"===l.getAttribute("id")||"card_order"===l.getAttribute("id")||"form2"===l.getAttribute("id")?2===e.parentNode.childNodes.length&&e.parentNode.childNodes[1].remove():4===e.parentNode.childNodes.length?e.parentNode.childNodes[3].remove():e.classList.contains("form-check")&&4===e.parentNode.parentNode.childNodes.length&&e.parentNode.parentNode.childNodes[3].remove(),n.style.cssText="font-size: 1rem; color: tomato; left: 2%; bottom: -2.5rem; position: static;",window.innerWidth>=768?n.style.cssText+="position: absolute":n.style.cssText+="display: block; margin-bottom: 1rem;","form1"!==l.getAttribute("id")&&"card_order"!==l.getAttribute("id")&&"form2"!==l.getAttribute("id")||(n.style.cssText="font-size: 1rem; color: tomato; left: 2%; margin-top: 0.4rem;"),e.classList.contains("form-name")&&(e.value.length<2||e.value.length>50)&&(n.textContent="Имя должно быть от 2 до 50 символов",e.parentNode.append(n),s++),e.classList.contains("form-phone")&&e.value.length<18&&(n.textContent="Номер должен содержать 11 символов",e.parentNode.append(n),s++),e.classList.contains("form-check")&&!1===e.checked&&(window.innerWidth>=768?n.style.cssText="font-size: 1rem; color: tomato; left: 0; margin-top: 0.4rem;":n.style.cssText="font-size: 1rem; color: tomato; left: 0; top: -5rem;",n.textContent="Необходимо подтвердить согласие!",e.parentNode.parentNode.append(n),s++)})),0===s){t.textContent="Идёт отправка...",l.append(t);const e=new FormData(l);let s={};e.forEach(((e,t)=>{s[t]=e})),(e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))(s).then((e=>{if(200!==e.status)throw new Error("Status network isn't 200");const l=document.querySelector("#thanks");l.style.display="block";const s=l.querySelector(".form-content p"),o=l.querySelector(".form-content h4");s.innerHTML="Ваша заявка отправлена. <br> Мы свяжемся с вами в ближайшее время.",o.textContent="Спасибо!",n.forEach((e=>{e.value=""})),t.textContent=""})).catch((e=>{const l=document.querySelector("#thanks");l.style.display="block";const n=l.querySelector(".form-content p"),s=l.querySelector(".form-content h4");n.textContent="Что-то пошло не так...",s.textContent="Ошибка",t.textContent="",console.error(e)}))}}))}))})()})();