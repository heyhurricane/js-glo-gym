(()=>{"use strict";(()=>{const e=document.querySelector(".club-select");let t=!1;const o=()=>{e.querySelector("ul").style.display=t?"none":"block",t=!t};document.body.addEventListener("click",(e=>{let l=e.target;l=l.closest(".club-select"),l||e.target.classList.contains("club-select__list")||e.target.classList.contains("club-select__option")||!t?l&&(l=e.target,console.log(l.classList),l.classList.contains("club-select__link")?console.log(l.classList):l.classList.contains("club-select__list")||l.classList.contains("club-select__option")||o()):o()}))})(),(()=>{const e=document.getElementById("free_visit_form"),t=document.querySelector(".open-popup"),o=document.querySelectorAll(".callback-btn"),l=document.getElementById("callback_form"),n=document.querySelector(".fixed-gift"),r=document.getElementById("gift"),s=document.getElementById("thanks");t.addEventListener("click",(t=>{t.preventDefault(),e.style.display="block"})),o.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),l.style.display="block"}))}));const c=(e,t)=>{(t.classList.contains("close_icon")||t.classList.contains("close-btn")||(t=t.closest(".overlay")))&&(e.style.display="none")};e.addEventListener("click",(t=>{let o=t.target;c(e,o)})),l.addEventListener("click",(e=>{let t=e.target;c(l,t)})),r&&(r.addEventListener("click",(e=>{let t=e.target;c(r,t)})),n.addEventListener("click",(e=>{e.preventDefault(),r.style.display="block",n.style.display="none"}))),s.addEventListener("click",(e=>{let t=e.target;c(s,t)}))})(),(()=>{const e=document.querySelector(".main-slider").querySelectorAll(".slide");let t,o=0;const l=()=>{var t,l;(t=e)[l=o].classList.remove("slide--active"),t[l].style.display="none",o++,o>=e.length&&(o=0),((e,t,o)=>{e[t].classList.add("slide--active"),e[t].style.display="flex"})(e,o)};((e=3e3)=>{t=setInterval(l,e)})(4e3)})(),(()=>{const e=document.querySelector(".services-slider"),t=e.querySelectorAll(".slide");let o=0,l=0;const n=(e,t,o)=>{e[t].classList.remove(o),e[t].style.display="none"},r=(e,t,o)=>{e[t].classList.add(o),e[t].style.display="block"};e.addEventListener("click",(e=>{e.preventDefault();let s=e.target;if(s.matches(".slider-btn"))if(s.matches(".slider-btn-next")){if(l+1>=t.length)return;n(t,o,"slide--active"),o>l?l++:l=o+5,o++,o>=t.length&&(o=0),o<0&&(o=t.length-1),l<0&&(l=t.length-1),r(t,l,"slide--active")}else if(s.matches(".slider-btn-prev")){if(0===o)return;n(t,l,"slide--active"),l--,o--,o>=t.length&&(o=0),o<0&&(o=t.length-1),l<0&&(l=t.length-1),r(t,o,"slide--active")}}))})(),(()=>{const e=document.querySelector(".gallery-slider"),t=e.querySelectorAll(".slide"),o=document.querySelector(".slider-dots");for(let e=0;e<t.length;e++){const e=document.createElement("li");e.classList.add("dot"),o.append(e)}const l=document.querySelectorAll(".dot");l[0].classList.add("dot-active");let n,r=0;const s=(e,t,o)=>{e[t].classList.remove(o)},c=(e,t,o)=>{e[t].classList.add(o)},i=()=>{s(t,r,"slide--active"),s(l,r,"dot-active"),r++,r>=t.length&&(r=0),c(t,r,"slide--active"),c(l,r,"dot-active")},a=(e=3e3)=>{n=setInterval(i,e)};a(4e3),e.addEventListener("click",(e=>{e.preventDefault();let o=e.target;o.matches(".gallery-slider-btn, .dot")&&(s(t,r,"slide--active"),s(l,r,"dot-active"),o.matches(".gallery-slider-btn-next")?r++:o.matches(".gallery-slider-btn-prev")?r--:o.matches(".dot")&&l.forEach(((e,t)=>{e===o&&(r=t)})),r>=t.length&&(r=0),r<0&&(r=t.length-1),c(t,r,"slide--active"),c(l,r,"dot-active"))})),e.addEventListener("mouseover",(e=>{e.target.matches(".gallery-slider-btn, .dot")&&clearInterval(n)})),e.addEventListener("mouseout",(e=>{e.target.matches(".gallery-slider-btn, .dot")&&a(4e3)}))})(),document.querySelectorAll('[name="name"]').forEach((e=>{e.addEventListener("input",(()=>{e.value=e.value.replace(/[^а-яА-Я\s]/,"")}))})),((e,t="+7 (___) ___-__-__")=>{const o=document.querySelectorAll(e),l=e=>{const o=e.target,l=e.keyCode,n=t,r=n.replace(/\D/g,""),s=o.value.replace(/\D/g,"");let c=0,i=n.replace(/[_\d]/g,(function(e){return c<s.length?s.charAt(c++)||r.charAt(c):e}));c=i.indexOf("_"),-1!==c&&(i=i.slice(0,c));let a=n.substr(0,o.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");a=new RegExp("^"+a+"$"),(!a.test(o.value)||o.value.length<5||l>47&&l<58)&&(o.value=i),"blur"===e.type&&o.value.length<5&&(o.value="")};for(const e of o)e.addEventListener("input",l),e.addEventListener("focus",l),e.addEventListener("blur",l)})('[name="phone"]',"+7 (___) ___-__-__"),(()=>{const e="Что-то пошло не так...",t=document.querySelectorAll("form");let o=document.createElement("div");o.style.cssText="font-size: 2rem;";const l=(e,t,o)=>{const l=e.closest(".popup"),n=e.childNodes,r=e.querySelector("h4");r.textContent=o;for(let e=0;e<n.length;e++)"#text"!==n[e].nodeName&&"H4"!==n[e].nodeName&&"#comment"!==n[e].nodeName&&(n[e].style.display="none");const s=document.createElement("p");s.classList.add("message"),s.innerHTML=t,s.style.cssText="font-size: 20px; color: #fff; font-weight: 500;  margin-top: 30px;",e.append(s),setTimeout((()=>{l.style.display="none",n[0].innerHTML="","callback_form"===l.getAttribute("id")?r.textContent="Обратный звонок":r.textContent="Записаться на визит";for(let e=0;e<n.length;e++)"#text"!==n[e].nodeName&&"H4"!==n[e].nodeName&&"#comment"!==n[e].nodeName&&(n[e].style.display="block");e.removeChild(s)}),4e3)},n=(e,t)=>{const o=document.querySelector("#thanks");o.style.display="block";const l=o.querySelector(".form-content p"),n=o.querySelector(".form-content h4");l.innerHTML=e,n.textContent=t,setTimeout((()=>{o.style.display="none"}),4e3)};t.forEach((r=>{"footer_form"===r.getAttribute("id")&&r.addEventListener("click",(()=>{t[3].querySelector("#callback_form1-phone").value=r.querySelectorAll("input")[2].value})),r.addEventListener("submit",(t=>{t.preventDefault();const s=r.querySelectorAll("input");"form1"!==r.getAttribute("id")&&"form2"!==r.getAttribute("id")||(o.style.color="#FFF"),o.textContent="";let c=0;if(s.forEach((e=>{let t;t="form1"===r.getAttribute("id")||"card_order"===r.getAttribute("id")||"form2"===r.getAttribute("id")?document.createElement("span"):document.createElement("div");const o=t;if(o.classList.add("mistake"),"form1"===r.getAttribute("id")||"card_order"===r.getAttribute("id")||"form2"===r.getAttribute("id")?e.classList.contains("form-check")?4===e.parentNode.childNodes.length&&e.parentNode.childNodes[3].remove():2===e.parentNode.childNodes.length&&e.parentNode.childNodes[1].remove():"footer_form"===r.getAttribute("id")?(2===e.parentNode.childNodes.length&&e.parentNode.childNodes[1].remove(),5===e.parentNode.childNodes.length&&e.parentNode.childNodes[4].remove()):4===e.parentNode.childNodes.length?e.parentNode.childNodes[3].remove():e.classList.contains("form-check")&&4===e.parentNode.parentNode.childNodes.length&&e.parentNode.parentNode.childNodes[3].remove(),o.style.cssText="font-size: 1rem; color: tomato; left: 2%; bottom: -2.5rem; position: static;",window.innerWidth>=768&&"footer_form"!==r.getAttribute("id")?o.style.cssText+="position: absolute":o.style.cssText+="display: block; margin-bottom: 1rem;","form1"!==r.getAttribute("id")&&"card_order"!==r.getAttribute("id")&&"form2"!==r.getAttribute("id")||(o.style.cssText="font-size: 1rem; color: tomato; left: 2%;","card_order"===r.getAttribute("id")?o.style.cssText+="margin-left: 30px; margin-bottom: 0.5rem;":o.style.cssText+="margin-top: 0.4rem;"),e.classList.contains("form-name")&&(e.value.length<2||e.value.length>50)&&(o.textContent="Имя должно быть от 2 до 50 символов",e.parentNode.append(o),c++),e.classList.contains("form-phone")&&e.value.length<18&&("footer_form"===r.getAttribute("id")?(o.style.cssText="font-size: 1rem; color: tomato; line-height: 1.2; text-align: left; margin-bottom: 0.4rem;",o.innerHTML="Номер должен содержать<br>11 символов"):o.textContent="Номер должен содержать 11 символов",e.parentNode.append(o),c++),"club-name"===e.getAttribute("name")){const t=r.querySelectorAll('[name="club-name"]');let l=0;t.forEach((e=>{!1===e.checked&&l++})),2===l&&"footer_leto_schelkovo"===e.getAttribute("id")&&(o.textContent="Выберите клуб",e.parentNode.append(o),c++)}e.classList.contains("form-check")&&!1===e.checked&&(window.innerWidth>=768?o.style.cssText="font-size: 1rem; color: tomato; left: 0; margin-top: 0.4rem;":o.style.cssText="font-size: 1rem; color: tomato; left: 0; top: -2rem;",o.textContent="Необходимо подтвердить согласие!","check"===e.getAttribute("id")||"check2"===e.getAttribute("id")||"card_order"===r.getAttribute("id")?e.parentNode.append(o):e.parentNode.parentNode.append(o),c++)})),0===c){o.textContent="Идёт отправка...",r.append(o);const t=new FormData(r);let c={};t.forEach(((e,t)=>{c[t]=e})),(e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))(c).then((e=>{if(200!==e.status)throw new Error("Status network isn't 200");if(o.textContent="","banner-form"===r.getAttribute("id")||"card_order"===r.getAttribute("id")||"footer_form"===r.getAttribute("id")?n("Ваша заявка отправлена. <br> Мы свяжемся с вами в ближайшее время.","Спасибо!"):l(r,"Ваша заявка отправлена. <br> Мы свяжемся с вами в ближайшее время.","Спасибо!"),"card_order"===r.getAttribute("id")){s[0].checked=!0;for(let e=6;e<s.length;e++)(7!==e||s[e].classList.contains("form-phone-club"))&&(s[e].value="",s[e].classList.contains("form-check")&&(s[e].checked=!1))}else"footer_form"===r.getAttribute("id")?s[2].value="":s.forEach((e=>{e.value="",e.classList.contains("form-check")&&(e.checked=!1)}))})).catch((t=>{o.textContent="",console.error(t),"banner-form"===r.getAttribute("id")||"card_order"===r.getAttribute("id")||"footer_form"===r.getAttribute("id")?n(e,"Ошибка!"):l(r,e,"Ошибка!")}))}}))}))})()})();